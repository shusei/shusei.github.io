# ADR-001: Server Infrastructure Selection

## Status
**Accepted** (2026-01-21)

## Context
我們需要一個 24/7 運行的環境來託管後端 API 與資料庫。
現有選項包括：
1.  使用者現有的電競主機 (6年前高階款)。
2.  購買樹莓派或 Mini PC (Home Lab)。
3.  使用免費層級的雲端服務 (Cloud Native)。

## Decision (決策)
我們決定採用 **「方案 A：完全免費的雲端架構 (Render + Supabase)」**。

**理由**：
1.  **TCO (總體擁有成本) 最低**：$0 電費，$0 硬體成本。
2.  **可用性 (Availability) 最高**：不受家中電力與網路不穩影響。
3.  **符合職涯目標**：更能展現現代化 Cloud Native 技術能力。

我們 **明確拒絕** 使用現有電競主機，因為其高功耗與過熱風險不符合 Production 環境要求。

## Technical Analysis (技術評估紀錄)
*以下為詳細的評估分析：*

---

# 伺服器方案評估：老舊電競主機 vs 其他選擇

## 你的現況分析
*   **設備**：6年前的高階電競主機 (8萬元等級)。
*   **問題**：耗電、風扇噪音大、容易過熱 (夏天需吹電風扇)。
*   **目標**：24小時運行的後端資料庫伺服器。

## 結論先說：強烈不建議使用這台電腦做 24/7 伺服器
雖然**技術上可行** (裝 Docker, WSL2 就可以跑)，但從**工程與成本角度**來看，這是一個極差的選擇。

### 1. 成本與風險分析 (Cost & Risk Analysis)
作為後端工程師，我們必須評估 TCO (Total Cost of Ownership)。

| 項目 | 你的電競主機 | 樹莓派 / Mini PC | 免費雲端 (Render/Supabase) |
| :--- | :--- | :--- | :--- |
| **電費 (每月)** | **極高** (待機約 100W-150W)<br>約 $300-$500 TWD/月 | **極低** (約 5W-10W)<br>約 $20-$40 TWD/月 | **$0** |
| **穩定性** | **差** (過熱會當機，服務中斷) | **高** (被動散熱，穩定) | **極高** (SLA 保證) |
| **噪音** | **大** (風扇全速運轉) | **無/極小** | **無** |
| **維護成本** | **高** (需開冷氣/電扇照顧它) | **低** | **零** |

> **關鍵點**：如果你面試時說「我用一台過熱會當機的電腦當 Server」，面試官會認為你**不懂「高可用性 (High Availability)」的重要性**。

---

## 最佳替代方案 (Alternatives)

### 方案 A：完全免費的雲端架構 (最推薦 🔥)
既然樹莓派太貴，電腦又耗電，為什麼不讓別人幫你付電費？
這是目前最主流的 **Serverless** 做法，完全符合你「GitHub Pages 作品集」的需求。

*   **後端運算**: **Render** 或 **Vercel Functions** (免費層級足夠展示 Demo)。
*   **資料庫**: **Supabase** (送你 500MB PostgreSQL) 或 **MongoDB Atlas** (免費 512MB)。
*   **快取**: **Upstash** (免費 Redis)。
*   **優點**：
    *   **$0 成本**。
    *   **24/7 在線**，不會因為你家跳電或電腦過熱而掛掉。
    *   **履歷加分**：這證明你會使用現代 Cloud Native 技術棧。

### 方案 B：洋垃圾 / 二手商用小主機 (硬體派推薦)
如果你真的很想在家裡架 Server (為了練 Linux 技術)，不要買樹莓派 (現在溢價太高)，也不要用電競主機。
去網拍找 **「二手商用 Mini PC」** (Tiny/Micro/Mini)。

*   **型號關鍵字**：Lenovo M710q, HP ProDesk 400/600 G3 Mini, Dell OptiPlex 3050 Micro。
*   **價格**：約 **$1,500 - $2,500 TWD** (比樹莓派便宜或相當，但效能強 10 倍)。
*   **規格**：Intel i3/i5 (6代或7代), 8GB RAM, SSD。
*   **優點**：
    *   **省電** (待機約 10W-15W)。
    *   **安靜**。
    *   **x86 架構** (相容性比樹莓派的 ARM 更好)。
    *   **擴充性** (可以換 RAM, SSD)。

---

## 建議策略

1.  **為了作品集 (Portfolio)**：採用 **方案 A (雲端)**。
    *   面試官隨時點開你的網頁都要能動。雲端最穩。
    *   不需要花錢買硬體。

2.  **為了練功 (Learning)**：採用 **方案 B (二手 Mini PC)**。
    *   如果你想學 Linux, Docker, K8s，買一台二手小主機丟在角落，裝 Ubuntu Server，這才是正解。
    *   你的電競主機就留著打電動或寫 Code 用，不要拿來當 Server。
